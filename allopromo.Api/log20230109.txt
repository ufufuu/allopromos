2023-01-09 18:01:49.927 -05:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 18:02:04.105 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-01-09 18:02:04.107 -05:00 [INF] Hosting environment: Development
2023-01-09 18:02:04.108 -05:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\allopromo.Api
2023-01-09 18:02:04.980 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/index.html  
2023-01-09 18:02:09.012 -05:00 [INF] Request finished in 4071.563ms 200 text/html;charset=utf-8
2023-01-09 18:02:12.565 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/v1/swagger.json  
2023-01-09 18:02:13.783 -05:00 [INF] Request finished in 1240.9676ms 200 application/json;charset=utf-8
2023-01-09 18:02:39.529 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/Store/categories  
2023-01-09 18:02:39.654 -05:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 18:02:39.907 -05:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2023-01-09 18:02:46.099 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-01-09 18:14:24.088 -05:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 18:14:28.253 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-01-09 18:14:28.285 -05:00 [INF] Hosting environment: Development
2023-01-09 18:14:28.286 -05:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\allopromo.Api
2023-01-09 18:14:28.420 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/index.html  
2023-01-09 18:14:31.104 -05:00 [INF] Request finished in 2699.8347ms 200 text/html;charset=utf-8
2023-01-09 18:14:32.687 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/v1/swagger.json  
2023-01-09 18:14:33.513 -05:00 [INF] Request finished in 827.6541ms 200 application/json;charset=utf-8
2023-01-09 18:14:57.382 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/Store/categories  
2023-01-09 18:14:57.513 -05:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 18:14:57.777 -05:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2023-01-09 18:15:05.290 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-01-09 18:15:10.718 -05:00 [INF] Executed DbCommand (381ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[categoryId], [s].[active], [s].[created], [s].[departmentId], [s].[expires], [s].[categoryName], [d].[departmentId], [d].[departmentName], [d].[departmentThumbnail]
FROM [StoreCategories] AS [s]
LEFT JOIN [Departments] AS [d] ON [s].[departmentId] = [d].[departmentId]
2023-01-09 18:15:11.335 -05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Core.Application.Dto.StoreCategoryDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 18:15:12.087 -05:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 14278.3134ms
2023-01-09 18:15:12.089 -05:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 18:15:12.131 -05:00 [INF] Request finished in 14750.0199ms 200 application/json; charset=utf-8
2023-01-09 18:21:14.172 -05:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 18:21:23.195 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-01-09 18:21:23.197 -05:00 [INF] Hosting environment: Development
2023-01-09 18:21:23.198 -05:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\allopromo.Api
2023-01-09 18:21:23.659 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/index.html  
2023-01-09 18:21:25.596 -05:00 [INF] Request finished in 1966.5571ms 200 text/html;charset=utf-8
2023-01-09 18:21:27.702 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/favicon-16x16.png  
2023-01-09 18:21:30.920 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/v1/swagger.json  
2023-01-09 18:21:31.401 -05:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2023-01-09 18:21:31.402 -05:00 [INF] Request finished in 3700.436ms 0 image/png
2023-01-09 18:21:31.901 -05:00 [INF] Request finished in 992.9596ms 200 application/json;charset=utf-8
2023-01-09 18:21:46.708 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/Store/categories  
2023-01-09 18:21:46.770 -05:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 18:21:47.127 -05:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2023-01-09 18:21:54.175 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-01-09 18:22:02.751 -05:00 [INF] Executed DbCommand (1,545ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[categoryId], [s].[active], [s].[created], [s].[departmentId], [s].[expires], [s].[categoryName], [d].[departmentId], [d].[departmentName], [d].[departmentThumbnail]
FROM [StoreCategories] AS [s]
LEFT JOIN [Departments] AS [d] ON [s].[departmentId] = [d].[departmentId]
2023-01-09 18:22:03.685 -05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Core.Application.Dto.StoreCategoryDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 18:22:04.823 -05:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 17662.1059ms
2023-01-09 18:22:04.826 -05:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 18:22:04.908 -05:00 [INF] Request finished in 18201.5538ms 200 application/json; charset=utf-8
2023-01-09 18:42:06.298 -05:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 18:42:08.774 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-01-09 18:42:08.776 -05:00 [INF] Hosting environment: Development
2023-01-09 18:42:08.777 -05:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\allopromo.Api
2023-01-09 18:42:08.932 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/index.html  
2023-01-09 18:42:09.928 -05:00 [INF] Request finished in 1010.7259ms 200 text/html;charset=utf-8
2023-01-09 18:42:11.225 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/v1/swagger.json  
2023-01-09 18:42:11.800 -05:00 [INF] Request finished in 580.2542ms 200 application/json;charset=utf-8
2023-01-09 18:42:28.349 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/Store/categories  
2023-01-09 18:42:28.376 -05:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 18:42:28.657 -05:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2023-01-09 18:42:36.478 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-01-09 18:42:41.014 -05:00 [ERR] Failed executing DbCommand (1,236ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[categoryId], [s].[DepartmentName], [s].[active], [s].[created], [s].[departmentId], [s].[expires], [s].[categoryName], [d].[departmentId], [d].[departmentName], [d].[departmentThumbnail]
FROM [StoreCategories] AS [s]
LEFT JOIN [Departments] AS [d] ON [s].[departmentId] = [d].[departmentId]
2023-01-09 18:42:41.558 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'allopromo.Infrastructure.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepartmentName'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:eaaf40fa-5afa-44b3-b78a-f168d4afbbc5
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepartmentName'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:eaaf40fa-5afa-44b3-b78a-f168d4afbbc5
Error Number:207,State:1,Class:16
2023-01-09 18:42:43.345 -05:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 14665.8817ms
2023-01-09 18:42:43.470 -05:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 18:42:43.763 -05:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
IncludableQueryable`2 -> IEnumerable`1
Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions+IncludableQueryable`2[[allopromo.Core.Entities.tStoreCategory, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[allopromo.Core.Entities.tDepartment, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.IEnumerable`1[[allopromo.Core.Application.Dto.StoreCategoryDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepartmentName'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at lambda_method(Closure , IncludableQueryable`2 , IEnumerable`1 , ResolutionContext )
ClientConnectionId:eaaf40fa-5afa-44b3-b78a-f168d4afbbc5
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at lambda_method(Closure , IncludableQueryable`2 , IEnumerable`1 , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at allopromo.Core.Model.StoreService.GetStoreCategoriesAsync() in C:\Users\MonPC\source\repos\allopromo\allopromo.Core\Services\StoreService.cs:line 159
   at allopromo.Api.Controllers.StoreController.GetStoreCategories() in C:\Users\MonPC\source\repos\allopromo\allopromo.Api\Controllers\StoreController.cs:line 155
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-01-09 18:42:44.153 -05:00 [INF] Request finished in 15804.7488ms 500 text/plain
2023-01-09 18:51:36.016 -05:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 18:51:39.522 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-01-09 18:51:39.555 -05:00 [INF] Hosting environment: Development
2023-01-09 18:51:39.555 -05:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\allopromo.Api
2023-01-09 18:51:39.744 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/index.html  
2023-01-09 18:51:41.234 -05:00 [INF] Request finished in 1515.4546ms 200 text/html;charset=utf-8
2023-01-09 18:51:45.845 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/v1/swagger.json  
2023-01-09 18:51:46.312 -05:00 [INF] Request finished in 468.3418ms 200 application/json;charset=utf-8
2023-01-09 18:57:51.787 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/Store/categories  
2023-01-09 18:57:51.924 -05:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 18:57:52.167 -05:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2023-01-09 18:57:59.408 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-01-09 18:58:04.944 -05:00 [ERR] Failed executing DbCommand (1,719ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[categoryId], [s].[DepartmentNameM], [s].[active], [s].[created], [s].[departmentId], [s].[expires], [s].[categoryName], [d].[departmentId], [d].[departmentName], [d].[departmentThumbnail]
FROM [StoreCategories] AS [s]
LEFT JOIN [Departments] AS [d] ON [s].[departmentId] = [d].[departmentId]
2023-01-09 18:58:05.464 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'allopromo.Infrastructure.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepartmentNameM'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:ecfdcd26-6d2d-479e-9309-d5c4d794cde4
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepartmentNameM'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:ecfdcd26-6d2d-479e-9309-d5c4d794cde4
Error Number:207,State:1,Class:16
2023-01-09 18:58:07.069 -05:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 14876.2677ms
2023-01-09 18:58:07.191 -05:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 18:58:07.484 -05:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
IncludableQueryable`2 -> IEnumerable`1
Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions+IncludableQueryable`2[[allopromo.Core.Entities.tStoreCategory, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[allopromo.Core.Entities.tDepartment, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> System.Collections.Generic.IEnumerable`1[[allopromo.Core.Application.Dto.StoreCategoryDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'DepartmentNameM'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at lambda_method(Closure , IncludableQueryable`2 , IEnumerable`1 , ResolutionContext )
ClientConnectionId:ecfdcd26-6d2d-479e-9309-d5c4d794cde4
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at lambda_method(Closure , IncludableQueryable`2 , IEnumerable`1 , ResolutionContext )
   at lambda_method(Closure , Object , Object , ResolutionContext )
   at allopromo.Core.Model.StoreService.GetStoreCategoriesAsync() in C:\Users\MonPC\source\repos\allopromo\allopromo.Core\Services\StoreService.cs:line 159
   at allopromo.Api.Controllers.StoreController.GetStoreCategories() in C:\Users\MonPC\source\repos\allopromo\allopromo.Api\Controllers\StoreController.cs:line 155
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2023-01-09 18:58:07.990 -05:00 [INF] Request finished in 16204.694ms 500 text/plain
2023-01-09 19:11:24.033 -05:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 19:11:26.748 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2023-01-09 19:11:26.759 -05:00 [INF] Hosting environment: Development
2023-01-09 19:11:26.760 -05:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\allopromo.Api
2023-01-09 19:11:26.862 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/index.html  
2023-01-09 19:11:27.967 -05:00 [INF] Request finished in 1114.443ms 200 text/html;charset=utf-8
2023-01-09 19:11:31.876 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/v1/swagger.json  
2023-01-09 19:11:32.597 -05:00 [INF] Request finished in 758.0178ms 200 application/json;charset=utf-8
2023-01-09 19:11:47.936 -05:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/Store/categories  
2023-01-09 19:11:48.133 -05:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 19:11:48.349 -05:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2023-01-09 19:11:56.450 -05:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2023-01-09 19:12:02.093 -05:00 [INF] Executed DbCommand (1,444ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[categoryName] AS [storeCategoryName], [d].[departmentName] AS [DepartmentName]
FROM [StoreCategories] AS [s]
LEFT JOIN [Departments] AS [d] ON [s].[departmentId] = [d].[departmentId]
2023-01-09 19:12:02.190 -05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Core.Application.Dto.StoreCategoryDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 19:12:02.995 -05:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 14627.1334ms
2023-01-09 19:12:02.996 -05:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2023-01-09 19:12:03.055 -05:00 [INF] Request finished in 15119.6147ms 200 application/json; charset=utf-8
