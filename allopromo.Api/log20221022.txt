2022-10-22 20:13:24.813 -04:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-22 20:13:33.818 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-22 20:13:33.821 -04:00 [INF] Hosting environment: Development
2022-10-22 20:13:33.824 -04:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\allopromo.Api
2022-10-22 20:13:34.244 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/index.html  
2022-10-22 20:13:36.187 -04:00 [INF] Request finished in 1954.2615ms 200 text/html;charset=utf-8
2022-10-22 20:13:37.958 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/v1/swagger.json  
2022-10-22 20:13:38.723 -04:00 [INF] Request finished in 769.2549ms 200 application/json;charset=utf-8
2022-10-22 20:14:01.997 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/Cities  
2022-10-22 20:14:02.044 -04:00 [INF] Executing endpoint 'allopromo.Api.Controllers.CitiesController.GetCities (allopromo.Api)'
2022-10-22 20:14:02.306 -04:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller allopromo.Api.Controllers.CitiesController (allopromo.Api).
2022-10-22 20:14:10.600 -04:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-10-22 20:14:16.992 -04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'allopromo.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-10-22 20:14:18.800 -04:00 [INF] Executed action allopromo.Api.Controllers.CitiesController.GetCities (allopromo.Api) in 16473.389ms
2022-10-22 20:14:18.925 -04:00 [INF] Executed endpoint 'allopromo.Api.Controllers.CitiesController.GetCities (allopromo.Api)'
2022-10-22 20:14:19.229 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A second operation was started on this context before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at allopromo.Core.Contracts.LocalizeService.GetCities() in C:\Users\MonPC\source\repos\allopromo\allopromo.Core\Model\LocalizeService.cs:line 40
   at allopromo.Api.Controllers.CitiesController.GetCities() in C:\Users\MonPC\source\repos\allopromo\allopromo.Api\Controllers\CitiesController.cs:line 56
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-22 20:14:19.820 -04:00 [INF] Request finished in 17833.3123ms 500 text/plain
2022-10-22 20:14:20.003 -04:00 [ERR] An error occurred using the connection to database 'allopromo' on server 'DESKTOP-51CUQQV'.
2022-10-22 20:14:21.268 -04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'allopromo.Infrastructure.Data.AppDbContext'.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-10-22 20:14:44.226 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/store/categories  
2022-10-22 20:14:44.242 -04:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:14:44.294 -04:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2022-10-22 20:14:44.448 -04:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-10-22 20:14:44.805 -04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'allopromo.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: A second operation was started on this context before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-10-22 20:14:46.942 -04:00 [INF] Executed DbCommand (1,761ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[storeCategoryId], [s].[storeCategoryName]
FROM [StoreCategories] AS [s]
2022-10-22 20:14:47.141 -04:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 2845.839ms
2022-10-22 20:14:47.282 -04:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:14:47.587 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A second operation was started on this context before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at allopromo.Core.Model.StoreService.GetStoreCategoriesAsync() in C:\Users\MonPC\source\repos\allopromo\allopromo.Core\Services\StoreService.cs:line 132
   at allopromo.Api.Controllers.StoreController.GetStoreCategories() in C:\Users\MonPC\source\repos\allopromo\allopromo.Api\Controllers\StoreController.cs:line 144
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-22 20:14:47.671 -04:00 [INF] Request finished in 3458.4681ms 500 text/plain
2022-10-22 20:14:47.952 -04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'allopromo.Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: Invalid attempt to call CheckDataIsReady when reader is closed.
   at Microsoft.Data.SqlClient.SqlDataReader.CheckDataIsReady(Int32 columnIndex, Boolean allowPartiallyReadColumn, Boolean permitAsync, String methodName)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadColumn(Int32 i, Boolean setTimeout, Boolean allowPartiallyReadColumn)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadColumn(Int32 i, Boolean setTimeout, Boolean allowPartiallyReadColumn)
   at Microsoft.Data.SqlClient.SqlDataReader.GetGuid(Int32 i)
   at lambda_method(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Invalid attempt to call CheckDataIsReady when reader is closed.
   at Microsoft.Data.SqlClient.SqlDataReader.CheckDataIsReady(Int32 columnIndex, Boolean allowPartiallyReadColumn, Boolean permitAsync, String methodName)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadColumn(Int32 i, Boolean setTimeout, Boolean allowPartiallyReadColumn)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadColumn(Int32 i, Boolean setTimeout, Boolean allowPartiallyReadColumn)
   at Microsoft.Data.SqlClient.SqlDataReader.GetGuid(Int32 i)
   at lambda_method(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-10-22 20:15:48.349 -04:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-22 20:15:50.807 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-22 20:15:50.831 -04:00 [INF] Hosting environment: Development
2022-10-22 20:15:50.832 -04:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\allopromo.Api
2022-10-22 20:15:51.001 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/index.html  
2022-10-22 20:15:52.251 -04:00 [INF] Request finished in 1283.099ms 200 text/html;charset=utf-8
2022-10-22 20:15:53.239 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/v1/swagger.json  
2022-10-22 20:15:54.100 -04:00 [INF] Request finished in 862.6918ms 200 application/json;charset=utf-8
2022-10-22 20:16:19.912 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/store/categories  
2022-10-22 20:16:20.040 -04:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:16:20.302 -04:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2022-10-22 20:16:26.121 -04:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-10-22 20:16:28.972 -04:00 [INF] Executed DbCommand (190ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[storeCategoryId], [s].[storeCategoryName]
FROM [StoreCategories] AS [s]
2022-10-22 20:16:29.496 -04:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Core.Application.Dto.StoreCategoryDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-22 20:16:30.253 -04:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 9926.0735ms
2022-10-22 20:16:30.258 -04:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:16:30.282 -04:00 [INF] Request finished in 10375.0609ms 200 application/json; charset=utf-8
2022-10-22 20:16:46.084 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/Cities  
2022-10-22 20:16:46.102 -04:00 [INF] Executing endpoint 'allopromo.Api.Controllers.CitiesController.GetCities (allopromo.Api)'
2022-10-22 20:16:46.140 -04:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller allopromo.Api.Controllers.CitiesController (allopromo.Api).
2022-10-22 20:16:46.404 -04:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-10-22 20:16:49.610 -04:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[cityId], [c].[cityGpsLatitude], [c].[cityGpsLongitude], [c].[cityName], [c].[countryId], [c].[tCountrycountryId]
FROM [Cities] AS [c]
2022-10-22 20:16:50.123 -04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'allopromo.Infrastructure.Data.AppDbContext'.
System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-10-22 20:16:54.661 -04:00 [INF] Executed action allopromo.Api.Controllers.CitiesController.GetCities (allopromo.Api) in 8512.6571ms
2022-10-22 20:16:55.232 -04:00 [INF] Executed endpoint 'allopromo.Api.Controllers.CitiesController.GetCities (allopromo.Api)'
2022-10-22 20:16:56.904 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at allopromo.Core.Contracts.LocalizeService.GetCities() in C:\Users\MonPC\source\repos\allopromo\allopromo.Core\Model\LocalizeService.cs:line 40
   at allopromo.Api.Controllers.CitiesController.GetCities() in C:\Users\MonPC\source\repos\allopromo\allopromo.Api\Controllers\CitiesController.cs:line 56
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-10-22 20:16:57.198 -04:00 [INF] Request finished in 11114.6242ms 500 text/plain
2022-10-22 20:17:34.176 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/store/categories  
2022-10-22 20:17:34.211 -04:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:17:34.213 -04:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2022-10-22 20:17:34.261 -04:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-10-22 20:17:34.286 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[storeCategoryId], [s].[storeCategoryName]
FROM [StoreCategories] AS [s]
2022-10-22 20:17:34.312 -04:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Core.Application.Dto.StoreCategoryDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-22 20:17:34.316 -04:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 102.5505ms
2022-10-22 20:17:34.317 -04:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:17:34.319 -04:00 [INF] Request finished in 144.0807ms 200 application/json; charset=utf-8
2022-10-22 20:17:39.050 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/store/categories  
2022-10-22 20:17:39.066 -04:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:17:39.069 -04:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2022-10-22 20:17:39.109 -04:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-10-22 20:17:39.172 -04:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[storeCategoryId], [s].[storeCategoryName]
FROM [StoreCategories] AS [s]
2022-10-22 20:17:39.198 -04:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Core.Application.Dto.StoreCategoryDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-22 20:17:39.213 -04:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 141.2283ms
2022-10-22 20:17:39.214 -04:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:17:39.216 -04:00 [INF] Request finished in 165.7947ms 200 application/json; charset=utf-8
2022-10-22 20:20:57.389 -04:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-10-22 20:20:59.917 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-10-22 20:20:59.960 -04:00 [INF] Hosting environment: Development
2022-10-22 20:20:59.960 -04:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\allopromo.Api
2022-10-22 20:21:00.303 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/index.html  
2022-10-22 20:21:01.655 -04:00 [INF] Request finished in 1364.5865ms 200 text/html;charset=utf-8
2022-10-22 20:21:02.688 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/swagger/v1/swagger.json  
2022-10-22 20:21:03.379 -04:00 [INF] Request finished in 691.7084ms 200 application/json;charset=utf-8
2022-10-22 20:21:19.074 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/Cities  
2022-10-22 20:21:19.103 -04:00 [INF] Executing endpoint 'allopromo.Api.Controllers.CitiesController.GetCities (allopromo.Api)'
2022-10-22 20:21:19.374 -04:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCities() on controller allopromo.Api.Controllers.CitiesController (allopromo.Api).
2022-10-22 20:21:25.060 -04:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-10-22 20:21:31.347 -04:00 [INF] Executed DbCommand (188ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[cityId], [c].[cityGpsLatitude], [c].[cityGpsLongitude], [c].[cityName], [c].[countryId], [c].[tCountrycountryId]
FROM [Cities] AS [c]
2022-10-22 20:21:32.027 -04:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Core.Application.Dto.CityDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-22 20:21:32.648 -04:00 [INF] Executed action allopromo.Api.Controllers.CitiesController.GetCities (allopromo.Api) in 13251.2938ms
2022-10-22 20:21:32.658 -04:00 [INF] Executed endpoint 'allopromo.Api.Controllers.CitiesController.GetCities (allopromo.Api)'
2022-10-22 20:21:32.682 -04:00 [INF] Request finished in 13608.7341ms 200 application/json; charset=utf-8
2022-10-22 20:21:58.447 -04:00 [INF] Request starting HTTP/2.0 GET https://localhost:44367/api/v1/store/categories  
2022-10-22 20:21:58.490 -04:00 [INF] Executing endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:21:58.596 -04:00 [INF] Route matched with {action = "GetStoreCategories", controller = "Store"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStoreCategories() on controller allopromo.Api.Controllers.StoreController (allopromo.Api).
2022-10-22 20:21:58.756 -04:00 [INF] Entity Framework Core 5.0.7 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-10-22 20:21:58.871 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[storeCategoryId], [s].[storeCategoryName]
FROM [StoreCategories] AS [s]
2022-10-22 20:21:58.981 -04:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Core.Application.Dto.StoreCategoryDto, allopromo.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-10-22 20:21:59.003 -04:00 [INF] Executed action allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api) in 406.2477ms
2022-10-22 20:21:59.004 -04:00 [INF] Executed endpoint 'allopromo.Api.Controllers.StoreController.GetStoreCategories (allopromo.Api)'
2022-10-22 20:21:59.016 -04:00 [INF] Request finished in 571.361ms 200 application/json; charset=utf-8
