2025-05-16 00:59:49.428 +00:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 00:59:58.443 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 00:59:58.453 +00:00 [INF] Hosting environment: Development
2025-05-16 00:59:58.454 +00:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api
2025-05-16 00:59:58.790 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/index.html  
2025-05-16 01:00:00.432 +00:00 [INF] Request finished in 1660.2364ms 200 text/html;charset=utf-8
2025-05-16 01:00:01.270 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/swagger-ui.css  
2025-05-16 01:00:02.233 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/swagger-ui-standalone-preset.js  
2025-05-16 01:00:03.873 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/v1/swagger.json  
2025-05-16 01:00:05.131 +00:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-05-16 01:00:05.131 +00:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-05-16 01:00:05.133 +00:00 [INF] Request finished in 2926.4809ms 0 application/javascript
2025-05-16 01:00:05.133 +00:00 [INF] Request finished in 3862.7765ms 0 text/css
2025-05-16 01:00:06.219 +00:00 [INF] Request finished in 2363.1377ms 200 application/json;charset=utf-8
2025-05-16 01:00:14.583 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/api/v1/Account  
2025-05-16 01:00:14.611 +00:00 [WRN] Failed to determine the https port for redirect.
2025-05-16 01:00:14.962 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 01:00:15.193 +00:00 [INF] Route matched with {action = "GetUsers", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 01:00:49.388 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 01:01:00.673 +00:00 [ERR] An error occurred using the connection to database 'promos' on server 'DESKTOP-51CUQQV'.
2025-05-16 01:01:04.081 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'allopromo.Infrastructure.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "promos" requested by the login. The login failed.
Login failed for user 'DESKTOP-51CUQQV\MonPC'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:bb3f427d-3e79-4d8e-bc7e-8993aa1720c3
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "promos" requested by the login. The login failed.
Login failed for user 'DESKTOP-51CUQQV\MonPC'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:bb3f427d-3e79-4d8e-bc7e-8993aa1720c3
Error Number:4060,State:1,Class:11
2025-05-16 01:01:14.669 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api) in 59419.2075ms
2025-05-16 01:01:15.614 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 01:01:21.832 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "promos" requested by the login. The login failed.
Login failed for user 'DESKTOP-51CUQQV\MonPC'.
   at allopromo.Core.Services.UserService.GetUsersWithRolesAsync() in C:\Users\MonPC\source\repos\allopromo\src\allopromo.Core\Services\UserService.cs:line 85
   at allopromo.Api.Controllers.AccountController.GetUsers() in C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api\Controllers\AccountController.cs:line 65
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:bb3f427d-3e79-4d8e-bc7e-8993aa1720c3
Error Number:4060,State:1,Class:11
2025-05-16 01:01:22.589 +00:00 [INF] Request finished in 68006.2404ms 500 text/plain
2025-05-16 01:03:14.865 +00:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 01:03:17.643 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 01:03:17.648 +00:00 [INF] Hosting environment: Development
2025-05-16 01:03:17.649 +00:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api
2025-05-16 01:03:17.925 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/index.html  
2025-05-16 01:03:18.768 +00:00 [INF] Request finished in 863.6377ms 200 text/html;charset=utf-8
2025-05-16 01:03:20.633 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/v1/swagger.json  
2025-05-16 01:03:21.730 +00:00 [INF] Request finished in 1098.1307ms 200 application/json;charset=utf-8
2025-05-16 01:03:35.227 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/api/v1/Account  
2025-05-16 01:03:35.268 +00:00 [WRN] Failed to determine the https port for redirect.
2025-05-16 01:03:35.648 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 01:03:35.866 +00:00 [INF] Route matched with {action = "GetUsers", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 01:03:45.164 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 01:03:51.246 +00:00 [ERR] An error occurred using the connection to database 'allopromo' on server 'DESKTOP-51CUQQV'.
2025-05-16 01:03:54.689 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'allopromo.Infrastructure.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "allopromo" requested by the login. The login failed.
Login failed for user 'DESKTOP-51CUQQV\MonPC'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:766b6f78-0747-4163-85b9-2c2610a04518
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "allopromo" requested by the login. The login failed.
Login failed for user 'DESKTOP-51CUQQV\MonPC'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:766b6f78-0747-4163-85b9-2c2610a04518
Error Number:4060,State:1,Class:11
2025-05-16 01:04:03.044 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api) in 27150.3736ms
2025-05-16 01:04:03.953 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 01:04:10.305 +00:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "allopromo" requested by the login. The login failed.
Login failed for user 'DESKTOP-51CUQQV\MonPC'.
   at allopromo.Core.Services.UserService.GetUsersWithRolesAsync() in C:\Users\MonPC\source\repos\allopromo\src\allopromo.Core\Services\UserService.cs:line 85
   at allopromo.Api.Controllers.AccountController.GetUsers() in C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api\Controllers\AccountController.cs:line 65
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:766b6f78-0747-4163-85b9-2c2610a04518
Error Number:4060,State:1,Class:11
2025-05-16 01:04:11.426 +00:00 [INF] Request finished in 36200.1141ms 500 text/plain
2025-05-16 01:19:33.709 +00:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 01:19:42.959 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 01:19:42.962 +00:00 [INF] Hosting environment: Development
2025-05-16 01:19:42.975 +00:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api
2025-05-16 01:19:43.372 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/index.html  
2025-05-16 01:19:44.592 +00:00 [INF] Request finished in 1237.9603ms 200 text/html;charset=utf-8
2025-05-16 01:20:23.375 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/v1/swagger.json  
2025-05-16 01:20:24.689 +00:00 [INF] Request finished in 1315.3482ms 200 application/json;charset=utf-8
2025-05-16 01:20:45.610 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/api/v1/Account  
2025-05-16 01:20:47.299 +00:00 [WRN] Failed to determine the https port for redirect.
2025-05-16 01:20:50.224 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 01:20:50.687 +00:00 [INF] Route matched with {action = "GetUsers", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 01:21:03.616 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 01:21:10.477 +00:00 [INF] Executed DbCommand (592ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
2025-05-16 01:21:11.076 +00:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
2025-05-16 01:21:11.314 +00:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Api.DTOs.UserDto, allopromo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-16 01:21:11.456 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api) in 20728.9578ms
2025-05-16 01:21:11.471 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 01:21:11.569 +00:00 [INF] Request finished in 25961.3949ms 200 application/json; charset=utf-8
2025-05-16 01:22:43.422 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:44306/api/v1/Account/register application/json 266
2025-05-16 01:22:43.586 +00:00 [INF] CORS policy execution successful.
2025-05-16 01:22:43.638 +00:00 [INF] No CORS policy found for the specified request.
2025-05-16 01:22:43.723 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api)'
2025-05-16 01:22:43.983 +00:00 [INF] Route matched with {action = "CreateUser", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateUser(allopromo.Api.DTOs.CreateUserDto) on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 01:22:45.506 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 01:22:47.138 +00:00 [INF] Executed DbCommand (689ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-16 01:22:47.183 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-16 01:22:47.250 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api) in 3265.5009ms
2025-05-16 01:22:47.251 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api)'
2025-05-16 01:22:47.254 +00:00 [INF] Request finished in 3885.0954ms 400 application/problem+json; charset=utf-8
2025-05-16 01:23:36.167 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:44306/api/v1/Account/register application/json 266
2025-05-16 01:23:36.170 +00:00 [INF] CORS policy execution successful.
2025-05-16 01:23:36.172 +00:00 [INF] No CORS policy found for the specified request.
2025-05-16 01:23:36.201 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api)'
2025-05-16 01:23:36.204 +00:00 [INF] Route matched with {action = "CreateUser", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateUser(allopromo.Api.DTOs.CreateUserDto) on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 01:24:25.225 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 01:24:25.516 +00:00 [INF] Executed DbCommand (230ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-16 01:27:09.008 +00:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 01:27:13.036 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 01:27:13.059 +00:00 [INF] Hosting environment: Development
2025-05-16 01:27:13.059 +00:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api
2025-05-16 01:27:13.294 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/index.html  
2025-05-16 01:27:14.432 +00:00 [INF] Request finished in 1152.0521ms 200 text/html;charset=utf-8
2025-05-16 01:27:16.812 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/v1/swagger.json  
2025-05-16 01:27:18.410 +00:00 [INF] Request finished in 1610.8386ms 200 application/json;charset=utf-8
2025-05-16 01:28:57.713 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:44306/api/v1/Account/register application/json 266
2025-05-16 01:28:57.748 +00:00 [WRN] Failed to determine the https port for redirect.
2025-05-16 01:28:57.753 +00:00 [INF] CORS policy execution successful.
2025-05-16 01:28:57.790 +00:00 [INF] No CORS policy found for the specified request.
2025-05-16 01:28:58.134 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api)'
2025-05-16 01:28:58.383 +00:00 [INF] Route matched with {action = "CreateUser", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateUser(allopromo.Api.DTOs.CreateUserDto) on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 01:29:22.064 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 01:29:45.503 +00:00 [INF] Executed DbCommand (12,854ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-16 01:29:47.943 +00:00 [INF] Executed DbCommand (979ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-16 01:29:50.233 +00:00 [INF] Executed DbCommand (598ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-16 01:30:09.109 +00:00 [INF] Executed DbCommand (9,825ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Int32), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [Type], [UserName], [firstName], [isAdmin], [isMerchant], [lastName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-05-16 01:30:10.280 +00:00 [INF] Executed DbCommand (619ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ApplicationUserId], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-05-16 01:30:10.380 +00:00 [INF] Executed DbCommand (39ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ApplicationUserId], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-05-16 01:30:21.726 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api) in 83246.1019ms
2025-05-16 01:30:23.731 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api)'
2025-05-16 01:30:38.261 +00:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Role CLIENTS does not exist.
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.AddToRoleAsync(TUser user, String normalizedRoleName, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.AddToRoleAsync(TUser user, String role)
   at allopromo.Api.Controllers.AccountController.CreateUser(CreateUserDto dto) in C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api\Controllers\AccountController.cs:line 118
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2025-05-16 01:30:43.467 +00:00 [INF] Request finished in 105760.8389ms 500 text/plain
2025-05-16 01:45:28.607 +00:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 01:45:34.019 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 01:45:34.023 +00:00 [INF] Hosting environment: Development
2025-05-16 01:45:34.044 +00:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api
2025-05-16 01:45:34.278 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/index.html  
2025-05-16 01:45:38.796 +00:00 [INF] Request finished in 4467.4005ms 200 text/html;charset=utf-8
2025-05-16 01:45:39.979 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/swagger-ui.css  
2025-05-16 01:45:41.161 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/favicon-16x16.png  
2025-05-16 01:45:41.856 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/v1/swagger.json  
2025-05-16 01:45:42.028 +00:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-05-16 01:45:42.028 +00:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-05-16 01:45:42.030 +00:00 [INF] Request finished in 868.0523ms 0 image/png
2025-05-16 01:45:42.032 +00:00 [INF] Request finished in 2061.5101ms 0 text/css
2025-05-16 01:45:43.423 +00:00 [INF] Request finished in 1567.2567ms 200 application/json;charset=utf-8
2025-05-16 01:45:59.895 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:44306/api/v1/Admin/CLients  0
2025-05-16 01:46:00.001 +00:00 [WRN] Failed to determine the https port for redirect.
2025-05-16 01:46:00.024 +00:00 [INF] CORS policy execution successful.
2025-05-16 01:46:00.039 +00:00 [INF] No CORS policy found for the specified request.
2025-05-16 01:46:00.538 +00:00 [INF] Executing endpoint 'allopromo.Controllers.AdminController.CreateRole (allopromo.Api)'
2025-05-16 01:46:00.922 +00:00 [INF] Route matched with {action = "CreateRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(System.String) on controller allopromo.Controllers.AdminController (allopromo.Api).
2025-05-16 01:46:02.942 +00:00 [INF] Executed action allopromo.Controllers.AdminController.CreateRole (allopromo.Api) in 1978.274ms
2025-05-16 01:46:03.287 +00:00 [INF] Executed endpoint 'allopromo.Controllers.AdminController.CreateRole (allopromo.Api)'
2025-05-16 01:46:05.084 +00:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.UserManager`1[Microsoft.AspNetCore.Identity.IdentityUser]' while attempting to activate 'allopromo.Controllers.AdminController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass4_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2025-05-16 01:46:05.890 +00:00 [INF] Request finished in 6020.9499ms 500 text/plain
2025-05-16 07:53:51.606 +00:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 07:53:55.749 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 07:53:56.002 +00:00 [INF] Hosting environment: Development
2025-05-16 07:53:56.002 +00:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api
2025-05-16 07:53:56.254 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/index.html  
2025-05-16 07:53:57.455 +00:00 [INF] Request finished in 1219.0755ms 200 text/html;charset=utf-8
2025-05-16 07:54:00.348 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/v1/swagger.json  
2025-05-16 07:54:02.167 +00:00 [INF] Request finished in 1818.8516ms 200 application/json;charset=utf-8
2025-05-16 07:54:24.143 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:44306/api/v1/Admin/Clients  0
2025-05-16 07:54:24.181 +00:00 [WRN] Failed to determine the https port for redirect.
2025-05-16 07:54:24.187 +00:00 [INF] CORS policy execution successful.
2025-05-16 07:54:24.204 +00:00 [INF] No CORS policy found for the specified request.
2025-05-16 07:54:24.506 +00:00 [INF] Executing endpoint 'allopromo.Controllers.AdminController.CreateRole (allopromo.Api)'
2025-05-16 07:54:24.893 +00:00 [INF] Route matched with {action = "CreateRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(System.String) on controller allopromo.Controllers.AdminController (allopromo.Api).
2025-05-16 07:54:26.674 +00:00 [INF] Executed action allopromo.Controllers.AdminController.CreateRole (allopromo.Api) in 1751.1052ms
2025-05-16 07:54:27.019 +00:00 [INF] Executed endpoint 'allopromo.Controllers.AdminController.CreateRole (allopromo.Api)'
2025-05-16 07:54:29.349 +00:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.UserManager`1[Microsoft.AspNetCore.Identity.IdentityUser]' while attempting to activate 'allopromo.Controllers.AdminController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass4_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2025-05-16 07:54:30.929 +00:00 [INF] Request finished in 6795.2752ms 500 text/plain
2025-05-16 08:16:44.468 +00:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 08:16:47.531 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 08:16:47.552 +00:00 [INF] Hosting environment: Development
2025-05-16 08:16:47.553 +00:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api
2025-05-16 08:16:47.701 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/index.html  
2025-05-16 08:16:48.525 +00:00 [INF] Request finished in 840.6775ms 200 text/html;charset=utf-8
2025-05-16 08:16:51.764 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/v1/swagger.json  
2025-05-16 08:16:52.962 +00:00 [INF] Request finished in 1198.4533ms 200 application/json;charset=utf-8
2025-05-16 08:17:20.624 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:44306/api/v1/Admin/Clients  0
2025-05-16 08:17:20.670 +00:00 [WRN] Failed to determine the https port for redirect.
2025-05-16 08:17:20.678 +00:00 [INF] CORS policy execution successful.
2025-05-16 08:17:20.692 +00:00 [INF] No CORS policy found for the specified request.
2025-05-16 08:17:21.082 +00:00 [INF] Executing endpoint 'allopromo.Controllers.AdminController.CreateRole (allopromo.Api)'
2025-05-16 08:17:21.368 +00:00 [INF] Route matched with {action = "CreateRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(System.String) on controller allopromo.Controllers.AdminController (allopromo.Api).
2025-05-16 08:17:31.233 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 08:17:42.789 +00:00 [INF] Executed DbCommand (1,154ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ApplicationUserId], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-05-16 08:17:43.166 +00:00 [INF] Executed DbCommand (64ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ApplicationUserId], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-05-16 08:17:44.331 +00:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ApplicationUserId], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-05-16 08:17:44.614 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Identity.IdentityResult'.
2025-05-16 08:17:44.762 +00:00 [INF] Executed action allopromo.Controllers.AdminController.CreateRole (allopromo.Api) in 23367.5007ms
2025-05-16 08:17:44.801 +00:00 [INF] Executed endpoint 'allopromo.Controllers.AdminController.CreateRole (allopromo.Api)'
2025-05-16 08:17:44.877 +00:00 [INF] Request finished in 24299.1355ms 200 application/json; charset=utf-8
2025-05-16 08:25:23.429 +00:00 [INF] User profile is available. Using 'C:\Users\MonPC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-16 08:25:26.038 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-16 08:25:26.041 +00:00 [INF] Hosting environment: Development
2025-05-16 08:25:26.043 +00:00 [INF] Content root path: C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api
2025-05-16 08:25:26.266 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/index.html  
2025-05-16 08:25:27.237 +00:00 [INF] Request finished in 990.6068ms 200 text/html;charset=utf-8
2025-05-16 08:25:29.155 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/swagger/v1/swagger.json  
2025-05-16 08:25:30.480 +00:00 [INF] Request finished in 1335.1852ms 200 application/json;charset=utf-8
2025-05-16 08:25:47.363 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/api/v1/Admin/roles  
2025-05-16 08:25:47.450 +00:00 [WRN] Failed to determine the https port for redirect.
2025-05-16 08:25:47.750 +00:00 [INF] Executing endpoint 'allopromo.Controllers.AdminController.GetRoles (allopromo.Api)'
2025-05-16 08:25:47.954 +00:00 [INF] Route matched with {action = "GetRoles", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoles() on controller allopromo.Controllers.AdminController (allopromo.Api).
2025-05-16 08:25:57.639 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 08:26:03.098 +00:00 [INF] Executed DbCommand (567ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ApplicationUserId], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
2025-05-16 08:26:03.661 +00:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[Microsoft.AspNetCore.Identity.IdentityRole, Microsoft.Extensions.Identity.Stores, Version=5.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60]]'.
2025-05-16 08:26:03.779 +00:00 [INF] Executed action allopromo.Controllers.AdminController.GetRoles (allopromo.Api) in 15779.0384ms
2025-05-16 08:26:03.785 +00:00 [INF] Executed endpoint 'allopromo.Controllers.AdminController.GetRoles (allopromo.Api)'
2025-05-16 08:26:03.836 +00:00 [INF] Request finished in 16474.4947ms 200 application/json; charset=utf-8
2025-05-16 08:26:47.546 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/api/v1/Account  
2025-05-16 08:26:47.564 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 08:26:47.671 +00:00 [INF] Route matched with {action = "GetUsers", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 08:26:47.892 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 08:26:48.048 +00:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
2025-05-16 08:26:48.481 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
2025-05-16 08:26:48.621 +00:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Api.DTOs.UserDto, allopromo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-16 08:26:48.644 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api) in 971.6382ms
2025-05-16 08:26:48.645 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 08:26:48.656 +00:00 [INF] Request finished in 1113.8358ms 200 application/json; charset=utf-8
2025-05-16 08:27:49.058 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:44306/api/v1/Account/Login application/json 57
2025-05-16 08:27:49.067 +00:00 [INF] CORS policy execution successful.
2025-05-16 08:27:49.078 +00:00 [INF] No CORS policy found for the specified request.
2025-05-16 08:27:49.114 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.Login (allopromo.Api)'
2025-05-16 08:27:49.295 +00:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(allopromo.Api.DTOs.LoginUserDto) on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 08:27:50.140 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 08:27:51.451 +00:00 [INF] Executed DbCommand (507ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-16 08:27:53.155 +00:00 [INF] Executed DbCommand (90ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-16 08:27:59.566 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.Login (allopromo.Api) in 10261.9834ms
2025-05-16 08:28:00.513 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.Login (allopromo.Api)'
2025-05-16 08:28:04.939 +00:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at allopromo.Core.Services.UserService.GenerateJwtToken(ApplicationUser user) in C:\Users\MonPC\source\repos\allopromo\src\allopromo.Core\Services\UserService.cs:line 154
   at allopromo.Api.Controllers.AccountController.Login(LoginUserDto dto) in C:\Users\MonPC\source\repos\allopromo\src\allopromo.Api\Controllers\AccountController.cs:line 163
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2025-05-16 08:28:06.193 +00:00 [INF] Request finished in 17194.352ms 500 text/plain
2025-05-16 08:34:19.410 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:44306/api/v1/Account/register application/json 277
2025-05-16 08:34:19.475 +00:00 [INF] CORS policy execution successful.
2025-05-16 08:34:19.492 +00:00 [INF] No CORS policy found for the specified request.
2025-05-16 08:34:19.634 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api)'
2025-05-16 08:34:19.917 +00:00 [INF] Route matched with {action = "CreateUser", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateUser(allopromo.Api.DTOs.CreateUserDto) on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 08:34:21.168 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 08:34:22.174 +00:00 [INF] Executed DbCommand (93ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-16 08:34:22.832 +00:00 [INF] Executed DbCommand (252ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-16 08:34:22.921 +00:00 [INF] Executed DbCommand (30ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-16 08:34:24.258 +00:00 [INF] Executed DbCommand (224ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (DbType = Int32), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [Type], [UserName], [firstName], [isAdmin], [isMerchant], [lastName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-05-16 08:34:24.600 +00:00 [INF] Executed DbCommand (57ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ApplicationUserId], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-05-16 08:34:24.806 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__p_0) AND ([a].[RoleId] = @__p_1)
2025-05-16 08:34:24.918 +00:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ApplicationUserId], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-05-16 08:34:25.081 +00:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-16 08:34:25.111 +00:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-16 08:34:25.407 +00:00 [INF] Executed DbCommand (171ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
2025-05-16 08:34:25.679 +00:00 [INF] Executed DbCommand (248ms) [Parameters=[@p18='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p19='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [SecurityStamp] = @p11, [TwoFactorEnabled] = @p12, [UserName] = @p13, [firstName] = @p14, [isAdmin] = @p15, [isMerchant] = @p16, [lastName] = @p17
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
SELECT @@ROWCOUNT;
2025-05-16 08:34:25.784 +00:00 [INF] Executed DbCommand (57ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-16 08:34:27.469 +00:00 [INF] Executing ObjectResult, writing value of type 'allopromo.Api.Model.Response'.
2025-05-16 08:34:27.515 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api) in 7597.5078ms
2025-05-16 08:34:27.517 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.CreateUser (allopromo.Api)'
2025-05-16 08:34:27.530 +00:00 [INF] Request finished in 8172.4819ms 200 application/json; charset=utf-8
2025-05-16 08:34:44.905 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:44306/api/v1/Account/Login application/json 58
2025-05-16 08:34:44.912 +00:00 [INF] CORS policy execution successful.
2025-05-16 08:34:44.913 +00:00 [INF] No CORS policy found for the specified request.
2025-05-16 08:34:44.921 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.Login (allopromo.Api)'
2025-05-16 08:34:44.951 +00:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(allopromo.Api.DTOs.LoginUserDto) on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 08:34:45.026 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 08:34:45.077 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-05-16 08:34:51.121 +00:00 [INF] Executed DbCommand (60ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-16 08:34:51.198 +00:00 [INF] Executed DbCommand (59ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-05-16 08:34:54.094 +00:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`3[[allopromo.Api.DTOs.UserDto, allopromo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-05-16 08:34:54.144 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.Login (allopromo.Api) in 9191.1549ms
2025-05-16 08:34:54.145 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.Login (allopromo.Api)'
2025-05-16 08:34:54.149 +00:00 [INF] Request finished in 9244.2633ms 200 application/json; charset=utf-8
2025-05-16 08:35:43.656 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/api/v1/Account/current-user  
2025-05-16 08:35:44.711 +00:00 [INF] Authorization failed.
2025-05-16 08:35:44.786 +00:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-16 08:35:44.815 +00:00 [INF] Request finished in 1159.8363ms 401 
2025-05-16 08:36:21.793 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/api/v1/Account/current-user  
2025-05-16 08:36:22.757 +00:00 [INF] Successfully validated the token.
2025-05-16 08:36:22.795 +00:00 [INF] Authorization was successful.
2025-05-16 08:36:22.799 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.GetCurrentUserName (allopromo.Api)'
2025-05-16 08:36:22.850 +00:00 [INF] Route matched with {action = "GetCurrentUserName", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUserName() on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 08:36:22.927 +00:00 [INF] Authorization was successful.
2025-05-16 08:36:23.005 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 08:36:23.188 +00:00 [INF] Executed DbCommand (158ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
2025-05-16 08:36:23.215 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-05-16 08:36:23.224 +00:00 [INF] Executing ObjectResult, writing value of type 'allopromo.Api.DTOs.UserDto'.
2025-05-16 08:36:23.232 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.GetCurrentUserName (allopromo.Api) in 381.1073ms
2025-05-16 08:36:23.233 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.GetCurrentUserName (allopromo.Api)'
2025-05-16 08:36:23.237 +00:00 [INF] Request finished in 1442.3297ms 200 application/json; charset=utf-8
2025-05-16 08:36:35.102 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:44306/api/v1/Account  
2025-05-16 08:36:35.107 +00:00 [INF] Executing endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 08:36:35.108 +00:00 [INF] Route matched with {action = "GetUsers", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller allopromo.Api.Controllers.AccountController (allopromo.Api).
2025-05-16 08:36:35.119 +00:00 [INF] Entity Framework Core 5.0.7 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2025-05-16 08:36:35.175 +00:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
2025-05-16 08:36:35.265 +00:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[Type], [a].[UserName], [a].[firstName], [a].[isAdmin], [a].[isMerchant], [a].[lastName]
FROM [AspNetUsers] AS [a]
2025-05-16 08:36:35.280 +00:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[allopromo.Api.DTOs.UserDto, allopromo.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-16 08:36:35.292 +00:00 [INF] Executed action allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api) in 182.4263ms
2025-05-16 08:36:35.292 +00:00 [INF] Executed endpoint 'allopromo.Api.Controllers.AccountController.GetUsers (allopromo.Api)'
2025-05-16 08:36:35.304 +00:00 [INF] Request finished in 200.402ms 200 application/json; charset=utf-8
